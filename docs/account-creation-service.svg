<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1238px" preserveAspectRatio="none" style="width:1938px;height:1238px;" version="1.1" viewBox="0 0 1938 1238" width="1938px" zoomAndPan="magnify"><defs/><g><!--MD5=[be5750da26e06623bc49653cefaf97c7]
entity p--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="250" x="174" y="651"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="164" y="661"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="164" y="731.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="210" x="194" y="719.2422">producer</text><!--MD5=[8e9b2d9d80e066cced8e5d90e9bdea61]
entity c--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="272" x="867" y="651"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="857" y="661"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="857" y="731.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="232" x="887" y="719.2422">consumer</text><!--MD5=[1c5ba14a582780a0070707c3598231a5]
entity ac--><path d="M12,275 C12,255 125,255 125,255 C125,255 238,255 238,275 L238,353.9375 C238,373.9375 125,373.9375 125,373.9375 C125,373.9375 12,373.9375 12,353.9375 L12,275 " fill="#ADD8E6" style="stroke: #000000; stroke-width: 3.0;"/><path d="M12,275 C12,295 125,295 125,295 C125,295 238,295 238,275 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="186" x="32" y="351.2422">account</text><!--MD5=[979c31051cf8d07bdf927ed864b836ec]
entity cl--><ellipse cx="1853" cy="241" fill="#FFFFFF" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M1853,257 L1853,311 M1827,273 L1879,273 M1853,311 L1827,341 M1853,311 L1879,341 " fill="none" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="124" x="1791" y="395.2422">client</text><!--MD5=[694f580618a8ff0a20e3fd904d058a88]
entity sp--><rect fill="#FFFF00" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="430" x="800" y="264"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="790" y="274"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="790" y="344.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="390" x="820" y="332.2422">schema-provider</text><!--MD5=[99db986d38fb499b252ed01955165f04]
entity kc--><rect fill="#D3D3D3" height="100.9375" style="stroke: #A80036; stroke-width: 3.0;" width="166" x="574" y="1117"/><rect fill="#D3D3D3" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="564" y="1127"/><rect fill="#D3D3D3" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="564" y="1197.9375"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="126" x="594" y="1185.2422">kafka</text><!--MD5=[f84e5b74347a0f3a1699ea7d0f690775]
link ac to p--><path d="M151.8062,373.6206 C184.4674,446.264 239.3292,568.2838 272.0538,641.0678 " fill="none" id="ac-&gt;p" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="276.3236,650.5648,276.2385,630.8673,272.2228,641.4443,261.6457,637.4286,276.3236,650.5648" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="560" x="251" y="547.2422">make request using uuid</text><!--MD5=[55cb83ca2a74855f56e7a3dc1128cf48]
reverse link c to kc--><path d="M1005.061,761.6224 C1004.449,838.9794 992.073,972.8238 921,1057 C875.5136,1110.8722 799.2616,1138.8246 740.3698,1153.0366 " fill="none" id="c&lt;-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1005.0764,751.554,997.0481,769.5414,1005.0607,761.554,1013.0481,769.5665,1005.0764,751.554" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="240" x="1003" y="861.2422">consumes</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="630" x="1003" y="922.1797">AccountCreationConfirmed</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="86" x="1003" y="983.1172">and</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="524" x="1003" y="1044.0547">AccountCreationFailed</text><!--MD5=[94120e2ee7c3943604d2e7dbc6bddc31]
link sp to cl--><path d="M1240.6992,314 C1420.5472,314 1661.2464,314 1780.182,314 " fill="none" id="sp-cl" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1790.613,314,1772.613,306,1780.613,314,1772.613,322,1790.613,314" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1230.2616,314,1248.2616,322,1240.2616,314,1248.2616,306,1230.2616,314" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="372" x="1266.5" y="172.2422">request account</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="280" x="1266.5" y="233.1797">using server</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="488" x="1266.5" y="294.1172">needs token and iban</text><!--MD5=[4491ca9a5d36695bc018da128a34af07]
reverse link ac to sp--><path d="M248.7076,314 C391.0564,314 627.3536,314 799.9792,314 " fill="none" id="ac&lt;-sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="238.6232,314,256.6232,322,248.6232,314,256.6232,306,238.6232,314" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="356" x="275" y="50.2422">if the username</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="314" x="275" y="111.1797">already exists</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="488" x="275" y="172.1172">checks the password</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="366" x="275" y="233.0547">otherwise insert</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="314" x="275" y="293.9922">with new uuid</text><!--MD5=[17ddfbfa79ec15258e7fd3d6d2dc71ca]
link p to kc--><path d="M287.4798,751.405 C273.456,826.5192 259.4776,968.4578 329,1057 C358.4652,1094.5262 477.6902,1127.8416 563.9138,1147.7192 " fill="none" id="p-&gt;kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="573.7288,1149.957,557.9578,1138.1555,563.9791,1147.7338,554.4007,1153.7551,573.7288,1149.957" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="218" x="331" y="922.2422">produces</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="572" x="331" y="983.1797">ConfirmAccountCreation</text><!--MD5=[84432b9fded1b1d6df0371e519366671]
reverse link sp to c--><path d="M1013.0952,375.4276 C1010.7362,451.5092 1006.7614,579.6958 1004.5692,650.394 " fill="none" id="sp&lt;-c" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1013.4312,364.5934,1004.877,382.3367,1013.1212,374.5886,1020.8694,382.8328,1013.4312,364.5934" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="458" x="1051" y="517.2422">send AccountResult</text><text fill="#000000" font-family="Roboto" font-size="52" lengthAdjust="spacingAndGlyphs" textLength="538" x="1011" y="578.1797">for active subscriptions</text><!--MD5=[2ce90d5aba44190890b4d0ee7a00d60d]
@startuml
skinparam shadowing false
skinparam defaultFontName Roboto
skinparam defaultFontSize 26

component producer as p #Yellow
component consumer as c #Yellow
database account as ac #LightBlue
actor client as cl #White
component "schema-provider" as sp #Yellow
component "kafka" as kc #LightGrey

ac - -> p :make request using uuid
c <- - kc :consumes\lAccountCreationConfirmed\nand\nAccountCreationFailed
cl <-left-> sp :request account\lusing server\nneeds token and iban
ac <- sp :if the username\lalready exists\nchecks the password\notherwise insert\nwith new uuid
p - -> kc :produces\lConfirmAccountCreation
sp <- - c :send AccountResult\nfor active subscriptions

@enduml

PlantUML version 1.2019.10(Fri Sep 13 22:53:03 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+10-b304.69
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>