<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1054px" preserveAspectRatio="none" style="width:1556px;height:1054px;" version="1.1" viewBox="0 0 1556 1054" width="1556px" zoomAndPan="magnify"><defs><filter height="300%" id="f189gsuas3np8l" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[be5750da26e06623bc49653cefaf97c7]
entity p--><rect fill="#FFFF00" filter="url(#f189gsuas3np8l)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="198" x="140" y="550"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="130" y="560"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="130" y="616.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="158" x="160" y="607.1094">producer</text><!--MD5=[8e9b2d9d80e066cced8e5d90e9bdea61]
entity c--><rect fill="#FFFF00" filter="url(#f189gsuas3np8l)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="218" x="692" y="550"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="682" y="560"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="682" y="616.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="178" x="712" y="607.1094">consumer</text><!--MD5=[1c5ba14a582780a0070707c3598231a5]
entity ac--><path d="M12,212 C12,192 103,192 103,192 C103,192 194,192 194,212 L194,276.875 C194,296.875 103,296.875 103,296.875 C103,296.875 12,296.875 12,276.875 L12,212 " fill="#ADD8E6" filter="url(#f189gsuas3np8l)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M12,212 C12,232 103,232 103,232 C103,232 194,232 194,212 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="142" x="32" y="277.1094">account</text><!--MD5=[979c31051cf8d07bdf927ed864b836ec]
entity cl--><ellipse cx="1483" cy="174" fill="#FFFFFF" filter="url(#f189gsuas3np8l)" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M1483,190 L1483,244 M1457,206 L1509,206 M1483,244 L1457,274 M1483,244 L1509,274 " fill="none" filter="url(#f189gsuas3np8l)" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="98" x="1434" y="325.1094">client</text><!--MD5=[694f580618a8ff0a20e3fd904d058a88]
entity sp--><rect fill="#FFFF00" filter="url(#f189gsuas3np8l)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="340" x="641" y="201"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="631" y="211"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="631" y="267.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="300" x="661" y="258.1094">schema-provider</text><!--MD5=[99db986d38fb499b252ed01955165f04]
entity kc--><rect fill="#D3D3D3" filter="url(#f189gsuas3np8l)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="138" x="454" y="946"/><rect fill="#D3D3D3" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="444" y="956"/><rect fill="#D3D3D3" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="444" y="1012.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="98" x="474" y="1003.1094">kafka</text><!--MD5=[f84e5b74347a0f3a1699ea7d0f690775]
link ac to p--><path d="M123.3606,296.2488 C148.9982,362.0394 192.792,474.4222 218.4968,540.385 " fill="none" id="ac-&gt;p" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="222.1536,549.7694,223.0715,530.0931,218.5225,540.452,208.1636,535.9029,222.1536,549.7694" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="438" x="201" y="456.1094">make request using uuid</text><!--MD5=[55cb83ca2a74855f56e7a3dc1128cf48]
reverse link c to kc--><path d="M799.0088,646.7166 C794.0314,710.3132 777.1794,816.3614 721,886 C688.399,926.4116 635.6778,952.7378 592.8318,968.6522 " fill="none" id="c&lt;-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="799.7588,636.1208,790.5075,653.5108,799.0525,646.0958,806.4675,654.6409,799.7588,636.1208" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="184" x="793" y="735.1094">consumes</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="486" x="793" y="781.9844">AccountCreationConfirmed</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="66" x="793" y="828.8594">and</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="406" x="793" y="875.7344">AccountCreationFailed</text><!--MD5=[94120e2ee7c3943604d2e7dbc6bddc31]
link sp to cl--><path d="M992.0628,244 C1135.611,244 1327.4662,244 1423.2794,244 " fill="none" id="sp-cl" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1433.3634,244,1415.3634,236,1423.3634,244,1415.3634,252,1433.3634,244" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="981.4426,244,999.4426,252,991.4426,244,999.4426,236,981.4426,244" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="288" x="1017.5" y="133.1094">request account</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="218" x="1017.5" y="179.9844">using server</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="380" x="1017.5" y="226.8594">needs token and iban</text><!--MD5=[4491ca9a5d36695bc018da128a34af07]
reverse link ac to sp--><path d="M204.1948,244 C317.8146,244 504.0834,244 640.3216,244 " fill="none" id="ac&lt;-sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="194.1092,244,212.1092,252,204.1092,244,212.1092,236,194.1092,244" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="282" x="230.5" y="39.1094">if the username</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="246" x="230.5" y="85.9844">already exists</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="374" x="230.5" y="132.8594">checks the password</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="288" x="230.5" y="179.7344">otherwise insert</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="246" x="230.5" y="226.6094">with new uuid</text><!--MD5=[17ddfbfa79ec15258e7fd3d6d2dc71ca]
link p to kc--><path d="M228.777,636.0952 C216.7886,697.864 204.824,812.237 259,886 C301.8098,944.2874 382.4998,969.5972 443.4534,980.5832 " fill="none" id="p-&gt;kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="453.8228,982.3496,437.422,971.4402,443.9648,980.6701,434.7349,987.2129,453.8228,982.3496" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="164" x="261" y="782.1094">produces</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="442" x="261" y="828.9844">ConfirmAccountCreation</text><!--MD5=[84432b9fded1b1d6df0371e519366671]
reverse link sp to c--><path d="M809.448,298.1664 C807.4646,367.3878 804.0702,485.8518 802.2462,549.506 " fill="none" id="sp&lt;-c" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="809.7538,287.4954,801.2412,305.2587,809.4672,297.4913,817.2347,305.7173,809.7538,287.4954" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="354" x="838" y="433.1094">send AccountResult</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="416" x="807" y="479.9844">for active subscriptions</text><!--MD5=[bfec7fb3ee4510903f29509c5246b7f3]
@startuml
skinparam defaultFontName Roboto
skinparam defaultFontSize 20

component producer as p #Yellow
component consumer as c #Yellow
database account as ac #LightBlue
actor client as cl #White
component "schema-provider" as sp #Yellow
component "kafka" as kc #LightGrey

ac - -> p :make request using uuid
c <- - kc :consumes\lAccountCreationConfirmed\nand\nAccountCreationFailed
cl <-left-> sp :request account\lusing server\nneeds token and iban
ac <- sp :if the username\lalready exists\nchecks the password\notherwise insert\nwith new uuid
p - -> kc :produces\lConfirmAccountCreation
sp <- - c :send AccountResult\nfor active subscriptions

@enduml

PlantUML version 1.2019.10(Fri Sep 13 22:53:03 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.3+12-b304.56
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>