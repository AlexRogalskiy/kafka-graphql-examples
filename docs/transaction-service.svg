<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="568px" preserveAspectRatio="none" style="width:1414px;height:568px;" version="1.1" viewBox="0 0 1414 568" width="1414px" zoomAndPan="magnify"><defs><filter height="300%" id="f1nd7o7vh200ab" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[edc2c29f12934937e9dee71e2d189b28]
entity tr--><path d="M12,70 C12,50 133,50 133,50 C133,50 254,50 254,70 L254,134.875 C254,154.875 133,154.875 133,154.875 C133,154.875 12,154.875 12,134.875 L12,70 " fill="#ADD8E6" filter="url(#f1nd7o7vh200ab)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M12,70 C12,90 133,90 133,90 C133,90 254,90 254,70 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="202" x="32" y="135.1094">transaction</text><!--MD5=[8e9b2d9d80e066cced8e5d90e9bdea61]
entity c--><rect fill="#FFFF00" filter="url(#f1nd7o7vh200ab)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="218" x="662" y="59"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="652" y="69"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="652" y="125.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="178" x="682" y="116.1094">consumer</text><!--MD5=[979c31051cf8d07bdf927ed864b836ec]
entity cl--><ellipse cx="1103" cy="390" fill="#FFFFFF" filter="url(#f1nd7o7vh200ab)" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M1103,406 L1103,460 M1077,422 L1129,422 M1103,460 L1077,490 M1103,460 L1129,490 " fill="none" filter="url(#f1nd7o7vh200ab)" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="98" x="1054" y="541.1094">client</text><!--MD5=[99db986d38fb499b252ed01955165f04]
entity kc--><rect fill="#D3D3D3" filter="url(#f1nd7o7vh200ab)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="138" x="1254" y="59"/><rect fill="#D3D3D3" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1244" y="69"/><rect fill="#D3D3D3" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1244" y="125.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="98" x="1274" y="116.1094">kafka</text><!--MD5=[694f580618a8ff0a20e3fd904d058a88]
entity sp--><rect fill="#FFFF00" filter="url(#f1nd7o7vh200ab)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="340" x="281" y="417"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="271" y="427"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="271" y="483.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="300" x="301" y="474.1094">schema-provider</text><!--MD5=[ceaf0cd2ce4ad636a55921864d5ee2bc]
reverse link tr to c--><path d="M264.9806,102 C382.29,102 551.7626,102 661.6554,102 " fill="none" id="tr&lt;-c" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="254.5046,102,272.5046,110,264.5046,102,272.5046,94,254.5046,102" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="334" x="291" y="85.1094">insert transactions</text><!--MD5=[55cb83ca2a74855f56e7a3dc1128cf48]
reverse link c to kc--><path d="M890.6202,102 C1001.4296,102 1162.4318,102 1253.469,102 " fill="none" id="c&lt;-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="880.0574,102,898.0574,110,890.0574,102,898.0574,94,880.0574,102" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="184" x="975" y="39.1094">consumes</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="300" x="917" y="85.9844">BalanceChanged</text><!--MD5=[94120e2ee7c3943604d2e7dbc6bddc31]
link sp to cl--><path d="M631.6732,460 C769.4566,460 950.7878,460 1043.2234,460 " fill="none" id="sp-cl" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1053.507,460,1035.507,452,1043.507,460,1035.507,468,1053.507,460" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="621.4536,460,639.4536,468,631.4536,460,639.4536,452,621.4536,460" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="360" x="657.5" y="397.1094">queries or subscribe</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="268" x="657.5" y="443.9844">to transactions</text><!--MD5=[5b9b4e6ad0ac870675818f129b06e9c6]
reverse link tr to sp--><path d="M186.0656,161.7406 C250.0804,233.8076 356.127,353.1934 412.6888,416.8696 " fill="none" id="tr&lt;-sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="179.24,154.0562,185.2127,172.8266,185.881,161.5326,197.175,162.201,179.24,154.0562" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="214" x="315" y="253.1094">sql query on</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="234" x="315" y="299.9844">derived state</text><!--MD5=[a9e274f941e496d3d2b249e342953251]
link c to sp--><path d="M732.4006,145.1832 C673.0574,211.5734 559.6632,338.433 496.4422,409.1614 " fill="none" id="c-&gt;sp" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="489.7364,416.6636,507.6967,408.5748,496.4007,409.2079,495.7675,397.9119,489.7364,416.6636" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="298" x="728" y="253.1094">send transaction</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="416" x="669" y="299.9844">for active subscriptions</text><!--MD5=[0800c3f87099d48340f95bf661be2fef]
@startuml
skinparam defaultFontName Roboto
skinparam defaultFontSize 20

database transaction as tr #LightBlue
component consumer as c #Yellow
actor client as cl #White
component kafka as kc #LightGrey

component "schema-provider" as sp #Yellow

tr <- c :insert transactions
c <- kc :consumes\nBalanceChanged
sp <-> cl :queries or subscribe\lto transactions
tr <- - sp :sql query on\lderived state
c - -> sp :send transaction\nfor active subscriptions


@enduml

PlantUML version 1.2019.10(Fri Sep 13 22:53:03 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.3+12-b304.56
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>