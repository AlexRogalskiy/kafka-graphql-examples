<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="758px" preserveAspectRatio="none" style="width:2358px;height:758px;" version="1.1" viewBox="0 0 2358 758" width="2358px" zoomAndPan="magnify"><defs><filter height="300%" id="fqa8q11g2idce" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[c52c3416bb7232c8d9e7f68ae0cdbba0]
cluster nl.openweb.command-handler.core.clj--><polygon fill="#FFFFFF" filter="url(#fqa8q11g2idce)" points="307.8484,32,997.8484,32,1011.8484,90.875,1471.8484,90.875,1471.8484,202,307.8484,202,307.8484,32" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="307.8484" x2="1011.8484" y1="90.875" y2="90.875"/><text fill="#000000" font-family="Roboto" font-size="40" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="678" x="315.8484" y="73.1094">nl.openweb.command-handler.core.clj</text><!--MD5=[340a6fcb7c2a101ebd2ab939719ee727]
cluster balancedb--><polygon fill="#FFFFFF" filter="url(#fqa8q11g2idce)" points="353.8484,546,549.8484,546,563.8484,604.875,921.8484,604.875,921.8484,734,353.8484,734,353.8484,546" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="353.8484" x2="563.8484" y1="604.875" y2="604.875"/><text fill="#000000" font-family="Roboto" font-size="40" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="361.8484" y="587.1094">balancedb</text><!--MD5=[3e86bdde7a8e8c640815745198aeca95]
entity mth--><rect fill="#FFFF00" filter="url(#fqa8q11g2idce)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="256" x="323.8484" y="100"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="313.8484" y="110"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="313.8484" y="166.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="216" x="343.8484" y="157.1094">cmt-handler</text><!--MD5=[b7bb3adeb3f661c4a5c6ffe8dcfe7071]
entity ach--><rect fill="#FFFF00" filter="url(#fqa8q11g2idce)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="248" x="649.8484" y="100"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="639.8484" y="110"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="639.8484" y="166.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="208" x="669.8484" y="157.1094">cac-handler</text><!--MD5=[8e9b2d9d80e066cced8e5d90e9bdea61]
entity c--><rect fill="#FFFF00" filter="url(#fqa8q11g2idce)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="218" x="968.8484" y="100"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="958.8484" y="110"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="958.8484" y="166.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="178" x="988.8484" y="157.1094">consumer</text><!--MD5=[be5750da26e06623bc49653cefaf97c7]
entity p--><rect fill="#FFFF00" filter="url(#fqa8q11g2idce)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="198" x="1256.8484" y="100"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1246.8484" y="110"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1246.8484" y="166.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="158" x="1276.8484" y="157.1094">producer</text><!--MD5=[2dfd16c97e330aeee31d39df6edcc58f]
entity balance--><path d="M551.8484,634 C551.8484,614 641.8484,614 641.8484,614 C641.8484,614 731.8484,614 731.8484,634 L731.8484,698.875 C731.8484,718.875 641.8484,718.875 641.8484,718.875 C641.8484,718.875 551.8484,718.875 551.8484,698.875 L551.8484,634 " fill="#ADD8E6" filter="url(#fqa8q11g2idce)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M551.8484,634 C551.8484,654 641.8484,654 641.8484,654 C641.8484,654 731.8484,654 731.8484,634 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="140" x="571.8484" y="699.1094">balance</text><!--MD5=[434be88e8469740fc1e7400864b00989]
entity cac--><path d="M802.8484,634 C802.8484,614 853.8484,614 853.8484,614 C853.8484,614 904.8484,614 904.8484,634 L904.8484,698.875 C904.8484,718.875 853.8484,718.875 853.8484,718.875 C853.8484,718.875 802.8484,718.875 802.8484,698.875 L802.8484,634 " fill="#ADD8E6" filter="url(#fqa8q11g2idce)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M802.8484,634 C802.8484,654 853.8484,654 853.8484,654 C853.8484,654 904.8484,654 904.8484,634 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="62" x="822.8484" y="699.1094">cac</text><!--MD5=[675c7a1b94b3fdea487d79d7a4066ba5]
entity cmt--><path d="M370.8484,634 C370.8484,614 425.8484,614 425.8484,614 C425.8484,614 480.8484,614 480.8484,634 L480.8484,698.875 C480.8484,718.875 425.8484,718.875 425.8484,718.875 C425.8484,718.875 370.8484,718.875 370.8484,698.875 L370.8484,634 " fill="#ADD8E6" filter="url(#fqa8q11g2idce)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M370.8484,634 C370.8484,654 425.8484,654 425.8484,654 C425.8484,654 480.8484,654 480.8484,634 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="70" x="390.8484" y="699.1094">cmt</text><!--MD5=[99db986d38fb499b252ed01955165f04]
entity kc--><rect fill="#F26724" filter="url(#fqa8q11g2idce)" height="86.875" style="stroke: #A80036; stroke-width: 3.0;" width="144" x="1501.8484" y="623"/><rect fill="#F26724" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1491.8484" y="633"/><rect fill="#F26724" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1491.8484" y="689.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="104" x="1521.8484" y="680.1094">Kafka</text><!--MD5=[1ed0ebabc1660dc377719ba4cd2ee996]
link mth to cmt--><path d="M323.0778,160.5568 C224.096,177.0014 99.147,205.1998 67.8484,246 C-8.9778,346.1488 -3.825,426.1012 67.8484,530 C101.9978,579.5036 266.6626,626.958 360.3256,650.538 " fill="none" id="mth-&gt;cmt" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="370.2716,653.0196,354.7437,640.9,360.569,650.5987,350.8703,656.4241,370.2716,653.0196" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="244" x="69.8484" y="379.1094">check/update</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="112" x="135.8484" y="425.9844">status</text><!--MD5=[68028bdd73b1f57e0a8c73f0b570c9c4]
link ach to cac--><path d="M831.7278,186.209 C849.3192,202.7514 866.4658,223.1914 875.8484,246 C924.8292,365.0708 895.8966,519.3758 873.1452,603.8844 " fill="none" id="ach-&gt;cac" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="870.4068,613.8372,882.8952,598.6043,873.0596,604.1955,867.4684,594.3599,870.4068,613.8372" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="244" x="905.8484" y="379.1094">check/update</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="112" x="971.8484" y="425.9844">status</text><!--MD5=[030376e7047580cc9dc3c9f030fa975a]
link mth to balance--><path d="M419.4436,186.8392 C408.4134,204.3268 397.459,225.2216 391.8484,246 C358.9436,367.8578 308.502,435.2084 391.8484,530 C410.1946,550.8654 490.7662,534.0484 515.8484,546 C545.2496,560.0096 572.234,583.5024 593.6228,606.0062 " fill="none" id="mth-&gt;balance" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="600.6572,613.5848,594.2752,594.9496,593.8542,606.2555,582.5483,605.8345,600.6572,613.5848" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="244" x="393.8484" y="379.1094">check/update</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="140" x="445.8484" y="425.9844">balance</text><!--MD5=[a8f8c1df50a7f3ff65524a193e4acba5]
link ach to balance--><path d="M745.294,186.0486 C734.5924,203.9392 723.2462,225.325 715.8484,246 C672.1924,368.0052 653.6412,519.4914 646.273,603.1266 " fill="none" id="ach-&gt;balance" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="645.3878,613.478,654.8928,596.2253,646.2401,603.5144,638.9511,594.8617,645.3878,613.478" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="134" x="720.8484" y="379.1094">creates</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="140" x="717.8484" y="425.9844">balance</text><!--MD5=[17ddfbfa79ec15258e7fd3d6d2dc71ca]
link p to kc--><path d="M1455.0964,152.589 C1569.5366,165.937 1747.1748,194.4888 1787.8484,246 C1866.0692,345.0634 1848.6212,419.3712 1787.8484,530 C1759.7322,581.1818 1703.2918,615.8386 1655.4316,637.3532 " fill="none" id="p-&gt;kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1645.9848,641.482,1665.6821,641.6038,1655.1478,637.4772,1659.2744,626.9429,1645.9848,641.482" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="494" x="1841.8484" y="285.1094">AccountCreationConfirmed,</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="414" x="1881.8484" y="331.9844">AccountCreationFailed,</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="466" x="1855.8484" y="378.8594">MoneyTransferConfirmed,</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="454" x="1861.8484" y="425.7344">MoneyTransferFailed and</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="300" x="1938.8484" y="472.6094">BalanceChanged</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="332" x="1922.8484" y="519.4844">(3 different topics)</text><!--MD5=[55cb83ca2a74855f56e7a3dc1128cf48]
reverse link c to kc--><path d="M1129.0012,193.8076 C1142.9512,209.5852 1157.1494,227.6704 1167.8484,246 C1235.3072,361.571 1177.0678,431.683 1267.8484,530 C1330.3582,597.6994 1432.7638,633.7014 1501.7008,651.3048 " fill="none" id="c&lt;-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1122.1892,186.2568,1128.3064,204.9806,1128.8877,193.6818,1140.1864,194.2631,1122.1892,186.2568" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="442" x="1298.8484" y="379.1094">ConfirmAccountCreation</text><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="490" x="1279.8484" y="425.9844">and ConfirmMoneyTransfer</text><!--MD5=[738840dde0a6edb7efae09ea205c0222]
@startuml
skinparam defaultFontName Roboto
skinparam defaultFontSize 20

package "nl.openweb.command-handler.core.clj" #White{
    component "cmt-handler" as mth #Yellow
    component "cac-handler" as ach #Yellow
    component consumer as c #Yellow
    component producer as p #Yellow
}
package balancedb #White{
    database balance #LightBlue
    database cac #LightBlue
    database cmt #LightBlue
}
component Kafka as kc #F26724

mth - -> cmt :check/update\nstatus
ach - -> cac :check/update\nstatus
mth - -> balance :check/update\nbalance
ach - -> balance :creates\nbalance
p - -> kc :AccountCreationConfirmed,\nAccountCreationFailed,\nMoneyTransferConfirmed,\nMoneyTransferFailed and\nBalanceChanged\n(3 different topics)
c <- - kc :ConfirmAccountCreation\n and ConfirmMoneyTransfer

@enduml

PlantUML version 1.2019.10(Fri Sep 13 22:53:03 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.3+12-b304.56
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>