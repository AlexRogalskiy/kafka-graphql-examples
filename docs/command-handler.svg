<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1052px" preserveAspectRatio="none" style="width:2246px;height:1052px;" version="1.1" viewBox="0 0 2246 1052" width="2246px" zoomAndPan="magnify"><defs><filter height="300%" id="f1jyd99u915oas" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[c52c3416bb7232c8d9e7f68ae0cdbba0]
cluster nl.openweb.command-handler.core.clj--><polygon fill="#FFFFFF" filter="url(#f1jyd99u915oas)" points="398.0126,550,1190.0126,550,1204.0126,610.76,1688.0126,610.76,1688.0126,724,398.0126,724,398.0126,550" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="398.0126" x2="1204.0126" y1="610.76" y2="610.76"/><text fill="#000000" font-family="Montserrat" font-size="40" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="780" x="406.0126" y="592.72">nl.openweb.command-handler.core.clj</text><!--MD5=[340a6fcb7c2a101ebd2ab939719ee727]
cluster balancedb--><polygon fill="#ADD8E6" filter="url(#f1jyd99u915oas)" points="282.0126,836,510.0126,836,524.0126,896.76,882.0126,896.76,882.0126,1028,282.0126,1028,282.0126,836" style="stroke: #000000; stroke-width: 3.0;"/><line style="stroke: #000000; stroke-width: 3.0;" x1="282.0126" x2="524.0126" y1="896.76" y2="896.76"/><text fill="#000000" font-family="Montserrat" font-size="40" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="216" x="290.0126" y="878.72">balancedb</text><!--MD5=[8e9b2d9d80e066cced8e5d90e9bdea61]
entity c--><rect fill="#FFFF00" filter="url(#f1jyd99u915oas)" height="88.76" style="stroke: #A80036; stroke-width: 3.0;" width="244" x="1428.0126" y="620"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1418.0126" y="630"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1418.0126" y="688.76"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="204" x="1448.0126" y="678.72">consumer</text><!--MD5=[be5750da26e06623bc49653cefaf97c7]
entity p--><rect fill="#FFFF00" filter="url(#f1jyd99u915oas)" height="88.76" style="stroke: #A80036; stroke-width: 3.0;" width="226" x="1131.0126" y="620"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1121.0126" y="630"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1121.0126" y="688.76"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="186" x="1151.0126" y="678.72">producer</text><!--MD5=[3e86bdde7a8e8c640815745198aeca95]
entity mth--><rect fill="#FFFF00" filter="url(#f1jyd99u915oas)" height="88.76" style="stroke: #A80036; stroke-width: 3.0;" width="294" x="415.0126" y="620"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="405.0126" y="630"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="405.0126" y="688.76"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="254" x="435.0126" y="678.72">cmt-handler</text><!--MD5=[b7bb3adeb3f661c4a5c6ffe8dcfe7071]
entity ach--><rect fill="#FFFF00" filter="url(#f1jyd99u915oas)" height="88.76" style="stroke: #A80036; stroke-width: 3.0;" width="282" x="779.0126" y="620"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="769.0126" y="630"/><rect fill="#FFFF00" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="769.0126" y="688.76"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="242" x="799.0126" y="678.72">cac-handler</text><!--MD5=[2dfd16c97e330aeee31d39df6edcc58f]
entity balance--><path d="M488.0126,926 C488.0126,906 588.0126,906 588.0126,906 C588.0126,906 688.0126,906 688.0126,926 L688.0126,992.76 C688.0126,1012.76 588.0126,1012.76 588.0126,1012.76 C588.0126,1012.76 488.0126,1012.76 488.0126,992.76 L488.0126,926 " fill="#EFEFF3" filter="url(#f1jyd99u915oas)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M488.0126,926 C488.0126,946 588.0126,946 588.0126,946 C588.0126,946 688.0126,946 688.0126,926 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="160" x="508.0126" y="992.72">balance</text><!--MD5=[434be88e8469740fc1e7400864b00989]
entity cac--><path d="M758.0126,926 C758.0126,906 812.0126,906 812.0126,906 C812.0126,906 866.0126,906 866.0126,926 L866.0126,992.76 C866.0126,1012.76 812.0126,1012.76 812.0126,1012.76 C812.0126,1012.76 758.0126,1012.76 758.0126,992.76 L758.0126,926 " fill="#EFEFF3" filter="url(#f1jyd99u915oas)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M758.0126,926 C758.0126,946 812.0126,946 812.0126,946 C812.0126,946 866.0126,946 866.0126,926 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="68" x="778.0126" y="992.72">cac</text><!--MD5=[675c7a1b94b3fdea487d79d7a4066ba5]
entity cmt--><path d="M298.0126,926 C298.0126,906 358.0126,906 358.0126,906 C358.0126,906 418.0126,906 418.0126,926 L418.0126,992.76 C418.0126,1012.76 358.0126,1012.76 358.0126,1012.76 C358.0126,1012.76 298.0126,1012.76 298.0126,992.76 L298.0126,926 " fill="#EFEFF3" filter="url(#f1jyd99u915oas)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M298.0126,926 C298.0126,946 358.0126,946 358.0126,946 C358.0126,946 418.0126,946 418.0126,926 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="80" x="318.0126" y="992.72">cmt</text><!--MD5=[99db986d38fb499b252ed01955165f04]
entity kc--><rect fill="#F26724" filter="url(#f1jyd99u915oas)" height="88.76" style="stroke: #A80036; stroke-width: 3.0;" width="154" x="1321.0126" y="16"/><rect fill="#F26724" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1311.0126" y="26"/><rect fill="#F26724" height="10" style="stroke: #A80036; stroke-width: 3.0;" width="20" x="1311.0126" y="84.76"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="114" x="1341.0126" y="74.72">Kafka</text><!--MD5=[1ed0ebabc1660dc377719ba4cd2ee996]
link mth to cmt--><path d="M414.531,672.3338 C274.3306,683.704 77.945,709.79 30.0126,768 C-49.4786,864.5354 169.1274,922.9068 287.5548,946.6474 " fill="none" id="mth-&gt;cmt" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="297.9928,948.7024,281.8776,937.3755,288.1812,946.7704,278.7863,953.074,297.9928,948.7024" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="412" x="32.0126" y="808.72">check/update status</text><!--MD5=[68028bdd73b1f57e0a8c73f0b570c9c4]
link ach to cac--><path d="M1043.4632,708.2008 C1060.9994,713.8598 1078.889,719.3062 1096.0126,724 C1187.9798,749.2098 1245.893,693.9786 1306.0126,768 C1320.5828,785.9396 1319.967,801.5772 1306.0126,820 C1253.9502,888.7332 998.2106,932.9916 876.5522,950.493 " fill="none" id="ach-&gt;cac" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="866.6172,951.9054,885.5641,957.2919,876.5176,950.4977,883.3118,941.4512,866.6172,951.9054" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="412" x="1320.0126" y="808.72">check/update status</text><!--MD5=[030376e7047580cc9dc3c9f030fa975a]
link mth to balance--><path d="M508.5834,708.5102 C492.3646,725.2836 476.581,745.7412 468.0126,768 C459.7098,789.5682 459.9558,798.3386 468.0126,820 C478.7964,848.9936 498.645,875.9776 519.1376,898.31 " fill="none" id="mth-&gt;balance" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="526.0996,905.7014,519.581,887.1135,519.243,898.4222,507.9343,898.0841,526.0996,905.7014" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="450" x="470.0126" y="808.72">check/update balance</text><!--MD5=[a8f8c1df50a7f3ff65524a193e4acba5]
link ach to balance--><path d="M938.4216,708.1322 C949.6966,742.9948 957.303,790.5296 930.0126,820 C898.514,854.0144 764.5348,817.5338 722.0126,836 C689.9878,849.9074 660.6308,874.7446 637.6106,898.4766 " fill="none" id="ach-&gt;balance" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="630.674,905.7928,648.864,898.2347,637.5543,898.536,637.253,887.2263,630.674,905.7928" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="292" x="952.0126" y="808.72">crates balance</text><!--MD5=[b61047e0ca9d64f6ed0e4d3e81504c74]
reverse link kc to p--><path d="M1310.5754,73.855 C1225.9802,92.412 1102.2676,134.3406 1044.0126,226 C985.3668,318.2738 1001.144,371.4214 1044.0126,472 C1059.299,507.8656 1135.329,575.2254 1189.1022,619.8572 " fill="none" id="kc&lt;-p" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1320.691,71.706,1301.4214,67.6216,1310.9093,73.7843,1304.7466,83.2722,1320.691,71.706" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="564" x="1046.0126" y="266.72">AccountCreationConfirmed,</text><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="470" x="1093.0126" y="315.48">AccountCreationFailed,</text><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="526" x="1065.0126" y="364.24">MoneyTransferConfirmed,</text><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="514" x="1071.0126" y="413">MoneyTransferFailed and</text><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="350" x="1153.0126" y="461.76">BalanceChanged</text><!--MD5=[55cb83ca2a74855f56e7a3dc1128cf48]
reverse link c to kc--><path d="M1579.8642,610.648 C1623.5476,524.8692 1693.0022,353.054 1628.0126,226 C1596.1682,163.7446 1528.8852,119.4792 1475.276,92.4008 " fill="none" id="c&lt;-kc" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="1575.1996,619.6756,1590.5699,607.3568,1579.7902,610.7915,1576.3554,600.0118,1575.1996,619.6756" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="504" x="1687.0126" y="339.72">ConfirmAccountCreation</text><text fill="#000000" font-family="Montserrat" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="556" x="1666.0126" y="388.48">and ConfirmMoneyTransfer</text><!--MD5=[38861ce6cf811324358dda74f6331932]
@startuml
skinparam defaultFontName Montserrat
skinparam defaultFontSize 20

package "nl.openweb.command-handler.core.clj" #White{
    component consumer as c #Yellow
    component producer as p #Yellow
    component "cmt-handler" as mth #Yellow
    component "cac-handler" as ach #Yellow
}
package balancedb #LightBlue{
    database balance #EFEFF3
    database cac #EFEFF3
    database cmt #EFEFF3
}
component Kafka as kc #F26724

mth - -> cmt :check/update status
ach - -> cac :check/update status
mth - -> balance :check/update balance
ach - -> balance :crates balance
kc <- - - p :AccountCreationConfirmed,\nAccountCreationFailed,\nMoneyTransferConfirmed,\nMoneyTransferFailed and\nBalanceChanged
c <- - - kc :ConfirmAccountCreation\n and ConfirmMoneyTransfer

@enduml

PlantUML version 1.2019.10(Fri Sep 13 22:53:03 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.3+12-b304.56
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>