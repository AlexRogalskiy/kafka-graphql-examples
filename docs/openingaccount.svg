<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1242px" preserveAspectRatio="none" style="width:1924px;height:1242px;" version="1.1" viewBox="0 0 1924 1242" width="1924px" zoomAndPan="magnify"><defs><filter height="300%" id="fjsm9jzmk5yw4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="70" x2="70" y1="186.875" y2="1053.625"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="707" x2="707" y1="186.875" y2="1053.625"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1198" x2="1198" y1="186.875" y2="1053.625"/><line style="stroke: #A80036; stroke-width: 2.0; stroke-dasharray: 5.0,5.0;" x1="1743" x2="1743" y1="186.875" y2="1053.625"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="98" x="16" y="177.1094">client</text><ellipse cx="71" cy="26" fill="#FFFFFF" filter="url(#fjsm9jzmk5yw4)" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M71,42 L71,96 M45,58 L97,58 M71,96 L45,126 M71,96 L97,126 " fill="none" filter="url(#fjsm9jzmk5yw4)" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="98" x="16" y="1088.7344">client</text><ellipse cx="71" cy="1118.5" fill="#FFFFFF" filter="url(#fjsm9jzmk5yw4)" rx="16" ry="16" style="stroke: #A80036; stroke-width: 4.0;"/><path d="M71,1134.5 L71,1188.5 M45,1150.5 L97,1150.5 M71,1188.5 L45,1218.5 M71,1188.5 L97,1218.5 " fill="none" filter="url(#fjsm9jzmk5yw4)" style="stroke: #A80036; stroke-width: 4.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="324" x="539" y="177.1094">GraphQL endpoint</text><ellipse cx="707" cy="108" fill="#FFFF00" filter="url(#fjsm9jzmk5yw4)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="683" x2="731" y1="136" y2="136"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="324" x="539" y="1088.7344">GraphQL endpoint</text><ellipse cx="707" cy="1130.5" fill="#FFFF00" filter="url(#fjsm9jzmk5yw4)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="683" x2="731" y1="1158.5" y2="1158.5"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="246" x="1070" y="177.1094">transactiondb</text><path d="M1163,68 C1163,48 1199,48 1199,48 C1199,48 1235,48 1235,68 L1235,120 C1235,140 1199,140 1199,140 C1199,140 1163,140 1163,120 L1163,68 " fill="#ADD8E6" filter="url(#fjsm9jzmk5yw4)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M1163,68 C1163,88 1199,88 1199,88 C1199,88 1235,88 1235,68 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="246" x="1070" y="1088.7344">transactiondb</text><path d="M1163,1118.5 C1163,1098.5 1199,1098.5 1199,1098.5 C1199,1098.5 1235,1098.5 1235,1118.5 L1235,1170.5 C1235,1190.5 1199,1190.5 1199,1190.5 C1199,1190.5 1163,1190.5 1163,1170.5 L1163,1118.5 " fill="#ADD8E6" filter="url(#fjsm9jzmk5yw4)" style="stroke: #000000; stroke-width: 3.0;"/><path d="M1163,1118.5 C1163,1138.5 1199,1138.5 1199,1138.5 C1199,1138.5 1235,1138.5 1235,1118.5 " fill="none" style="stroke: #000000; stroke-width: 3.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="104" x="1685" y="177.1094">Kafka</text><ellipse cx="1743" cy="108" fill="#D3D3D3" filter="url(#fjsm9jzmk5yw4)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="1719" x2="1767" y1="136" y2="136"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="104" x="1685" y="1088.7344">Kafka</text><ellipse cx="1743" cy="1130.5" fill="#D3D3D3" filter="url(#fjsm9jzmk5yw4)" rx="24" ry="24" style="stroke: #A80036; stroke-width: 4.0;"/><line style="stroke: #A80036; stroke-width: 4.0;" x1="1719" x2="1767" y1="1158.5" y2="1158.5"/><polygon fill="#A80036" points="683,257.75,703,265.75,683,273.75,691,265.75" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="71" x2="695" y1="265.75" y2="265.75"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="588" x="85" y="251.9844">Subscribe to get_account stream</text><polygon fill="#A80036" points="1175,332.625,1195,340.625,1175,348.625,1183,340.625" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="707" x2="1187" y1="340.625" y2="340.625"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="444" x="721" y="326.8594">Create account with uuid</text><polygon fill="#A80036" points="1719,407.5,1739,415.5,1719,423.5,1727,415.5" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="707" x2="1731" y1="415.5" y2="415.5"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="604" x="721" y="401.7344">Create a ConfirmAccountCreation</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="1743" x2="1827" y1="490.375" y2="490.375"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1827" x2="1827" y1="490.375" y2="516.375"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1745" x2="1827" y1="516.375" y2="516.375"/><polygon fill="#A80036" points="1765,508.375,1745,516.375,1765,524.375,1757,516.375" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="144" x="1757" y="476.6094">Process</text><polygon fill="#A80036" points="1719,583.25,1739,591.25,1719,599.25,1727,591.25" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="707" x2="1731" y1="591.25" y2="591.25"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="266" x="721" y="577.4844">Polling records</text><polygon fill="#A80036" points="729,658.125,709,666.125,729,674.125,721,666.125" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="717" x2="1741" y1="666.125" y2="666.125"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="988" x="741" y="652.3594">Sends records one being an AccountCreationConfirmed</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="707" x2="791" y1="741" y2="741"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="791" x2="791" y1="741" y2="767"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="709" x2="791" y1="767" y2="767"/><polygon fill="#A80036" points="729,759,709,767,729,775,721,767" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="232" x="721" y="727.2344">Filter on uuid</text><polygon fill="#A80036" points="93,833.875,73,841.875,93,849.875,85,841.875" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="81" x2="705" y1="841.875" y2="841.875"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="358" x="105" y="828.1094">Send AccountResult</text><line style="stroke: #A80036; stroke-width: 2.0;" x1="71" x2="155" y1="916.75" y2="916.75"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="155" x2="155" y1="916.75" y2="942.75"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="73" x2="155" y1="942.75" y2="942.75"/><polygon fill="#A80036" points="93,934.75,73,942.75,93,950.75,85,942.75" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="368" x="85" y="902.9844">Store iban and token</text><polygon fill="#A80036" points="683,1009.625,703,1017.625,683,1025.625,691,1017.625" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="71" x2="695" y1="1017.625" y2="1017.625"/><text fill="#000000" font-family="Roboto" font-size="40" lengthAdjust="spacingAndGlyphs" textLength="522" x="85" y="1003.8594">End subscription get_account</text><!--MD5=[ab64e7bfa0a08d2a9a7d674989be69b9]
@startuml
skinparam defaultFontName Roboto
skinparam defaultFontSize 20

actor client as cl #White
entity "GraphQL endpoint" as ge #Yellow
database transactiondb as pgt #LightBlue
entity "Kafka" as ka #LightGrey

cl -> ge : Subscribe to get_account stream
ge -> pgt : Create account with uuid
ge -> ka : Create a ConfirmAccountCreation
ka -> ka : Process
ge -> ka : Polling records
ka -> ge : Sends records one being an AccountCreationConfirmed
ge -> ge : Filter on uuid
ge -> cl : Send AccountResult
cl -> cl : Store iban and token
cl -> ge : End subscription get_account

@enduml

PlantUML version 1.2019.10(Fri Sep 13 22:53:03 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.3+12-b304.56
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>